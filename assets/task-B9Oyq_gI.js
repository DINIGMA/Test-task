import{B as v,h as r,z as k}from"./index-N1N5DdsZ.js";const g=v("task",()=>{const e=r(JSON.parse(localStorage.getItem("tasks"))||null),n=r("all"),u=async()=>{try{if(!e.value){const t=await fetch("/Test-task/task.json");e.value=await t.json(),s()}}catch{e.value=[]}},c=k(()=>{switch(n.value){case"finished":return e.value.filter(t=>t.done);case"unfinished":return e.value.filter(t=>!t.done);default:return e.value}}),i=t=>{const a=e.value.reduce((o,l)=>l.id>o?l.id:o,0);e.value.push({id:a+1,...t}),s()},d=t=>{e.value=e.value.filter(a=>a.id!=t),s()},f=t=>{const a=e.value.find(o=>o.id===t);a&&(a.done=!a.done,s())},s=()=>{localStorage.setItem("tasks",JSON.stringify(e.value))};return{tasks:e,loadTasks:u,deleteTask:d,saveToLocalStorage:s,filteredTasks:c,currentFilter:n,addTask:i,toggleTaskDone:f}});export{g as u};
